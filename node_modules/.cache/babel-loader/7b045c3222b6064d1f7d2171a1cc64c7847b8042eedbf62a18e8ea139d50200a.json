{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState,useCallback,useEffect}from\"react\";import{Container,Form,SubmitButton,List,DeleteButton,Eduardo}from'./styles';import{FaGithub,FaPlus,FaSpinner,FaBars,FaTrash}from'react-icons/fa';import{Link}from'react-router-dom';import api from'../../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Main(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newRepo=_useState2[0],setNewRepo=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),repositorios=_useState4[0],setRepositorios=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),alert=_useState8[0],setAlert=_useState8[1];//Did Mount - Buscar\nuseEffect(function(){var repoStorage=localStorage.getItem('repos');if(repoStorage){setRepositorios(JSON.parse(repoStorage));}},[]);//Did Update - Salvar Alterações\nuseEffect(function(){localStorage.setItem('repos',JSON.stringify(repositorios));},[repositorios]);var handleSubmit=useCallback(function(e){e.preventDefault();function submit(){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,hasRepo,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);setAlert(null);_context.prev=2;if(!(newRepo==='')){_context.next=5;break;}throw new Error('Você precisa indicar um repositório.');case 5:_context.next=7;return api.get(\"repos/\".concat(newRepo));case 7:response=_context.sent;//Faz a validação se o repositório já está incluso na lista.\nhasRepo=repositorios.find(function(repo){return repo.name===newRepo;});if(!hasRepo){_context.next=11;break;}throw new Error('Repositório duplicado.');case 11:data={name:response.data.full_name};setRepositorios([].concat(_toConsumableArray(repositorios),[data]));setNewRepo('');_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);setAlert(true);console.log(_context.t0);case 20:_context.prev=20;setLoading(false);return _context.finish(20);case 23:case\"end\":return _context.stop();}},_callee,null,[[2,16,20,23]]);}));return _submit.apply(this,arguments);}submit();},[newRepo,repositorios]);function handleInputChange(e){setNewRepo(e.target.value);setAlert(null);}var handleDelete=useCallback(function(repo){var find=repositorios.filter(function(r){return r.name!==repo;});setRepositorios(find);},[repositorios]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(FaGithub,{size:25}),\"My Repositories\"]}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,error:alert,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Add Repositorie\",value:newRepo,onChange:handleInputChange}),/*#__PURE__*/_jsx(SubmitButton,{loading:loading?1:0,children:loading?/*#__PURE__*/_jsx(FaSpinner,{color:\"#FFF\",size:14}):/*#__PURE__*/_jsx(FaPlus,{color:\"#FFF\",size:14})})]}),/*#__PURE__*/_jsx(List,{children:repositorios.map(function(repo){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(DeleteButton,{onClick:function onClick(){return handleDelete(repo.name);},children:/*#__PURE__*/_jsx(FaTrash,{size:14})}),repo.name]}),/*#__PURE__*/_jsx(Link,{to:\"/repositorio/\".concat(encodeURIComponent(repo.name)),children:/*#__PURE__*/_jsx(FaBars,{size:20})})]},repo.name);})}),/*#__PURE__*/_jsx(Eduardo,{children:/*#__PURE__*/_jsx(\"h5\",{children:\"www.eduardoolimpio.com\"})})]})});}","map":{"version":3,"names":["React","useState","useCallback","useEffect","Container","Form","SubmitButton","List","DeleteButton","Eduardo","FaGithub","FaPlus","FaSpinner","FaBars","FaTrash","Link","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Main","_useState","_useState2","_slicedToArray","newRepo","setNewRepo","_useState3","_useState4","repositorios","setRepositorios","_useState5","_useState6","loading","setLoading","_useState7","_useState8","alert","setAlert","repoStorage","localStorage","getItem","JSON","parse","setItem","stringify","handleSubmit","e","preventDefault","submit","_submit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","hasRepo","data","wrap","_callee$","_context","prev","next","Error","get","concat","sent","find","repo","name","full_name","_toConsumableArray","t0","console","log","finish","stop","handleInputChange","target","value","handleDelete","filter","r","children","size","onSubmit","error","type","placeholder","onChange","color","map","onClick","to","encodeURIComponent"],"sources":["C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/src/pages/Main/index.js"],"sourcesContent":["import { React, useState, useCallback, useEffect } from \"react\";\nimport { Container, Form, SubmitButton, List, DeleteButton, Eduardo  } from './styles';\nimport { FaGithub, FaPlus, FaSpinner, FaBars, FaTrash } from 'react-icons/fa';\nimport { Link } from 'react-router-dom';\nimport api from '../../services/api';\n\nexport default function Main() {\n\n    const [newRepo, setNewRepo] = useState('');\n    const [repositorios, setRepositorios] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [alert, setAlert] = useState(null);\n\n    //Did Mount - Buscar\n    useEffect(() => {\n        const repoStorage = localStorage.getItem('repos');\n        if (repoStorage) {\n            setRepositorios(JSON.parse(repoStorage));\n        }\n    }, []);\n\n\n    //Did Update - Salvar Alterações\n    useEffect(() => {\n        localStorage.setItem('repos', JSON.stringify(repositorios));\n    }, [repositorios]);\n\n\n    const handleSubmit = useCallback((e) => {\n        e.preventDefault();\n\n        async function submit(){\n            setLoading(true);\n            setAlert(null);\n            try{\n                //Fazer a verificação se está em branco para não criar uma requisição.\n                if(newRepo === '') {\n                    throw new Error('Você precisa indicar um repositório.')\n                }\n                \n                const response = await api.get(`repos/${newRepo}`);\n                \n                //Faz a validação se o repositório já está incluso na lista.\n                const hasRepo = repositorios.find(repo => repo.name === newRepo);\n\n                if(hasRepo) {\n                    throw new Error('Repositório duplicado.');\n                }\n\n                const data = {\n                    name: response.data.full_name,\n                }\n        \n                setRepositorios([...repositorios, data]);\n                setNewRepo('');\n            } catch (error){\n                setAlert(true);\n                console.log(error);\n            } finally {\n                setLoading(false);\n            }\n   \n        }\n        \n        submit();\n\n    }, [newRepo, repositorios]);\n     \n\n    function handleInputChange(e) {\n        setNewRepo(e.target.value);\n        setAlert(null);\n    }\n\n    const handleDelete = useCallback((repo) => {\n        const find = repositorios.filter(r => r.name !== repo);\n        setRepositorios(find);\n    }, [repositorios]);\n\n    return (\n        <>   \n        <Container>\n            <h1>\n                <FaGithub size={25} />\n                My Repositories\n            </h1>\n\n            <Form onSubmit={handleSubmit} error={alert}>\n                <input \n                type=\"text\" \n                placeholder=\"Add Repositorie\" \n                value={newRepo}\n                onChange={handleInputChange}\n                />\n\n                <SubmitButton loading={loading ? 1 : 0}>\n                    {loading ? (\n                        <FaSpinner color=\"#FFF\" size={14} />\n                    ) : (\n                        <FaPlus color=\"#FFF\" size={14} />\n                    )}\n                </SubmitButton>\n            </Form>\n\n            <List>\n                {repositorios.map(repo => (\n                    <li key={repo.name}>\n                        <span>\n                        <DeleteButton onClick={() => handleDelete(repo.name)}>\n                            <FaTrash size={14}/>\n                        </DeleteButton>\n                        {repo.name}\n                        </span>\n                        <Link to={`/repositorio/${encodeURIComponent(repo.name)}`}>\n                            <FaBars size={20} />\n                        </Link>\n                    </li>\n                ))}\n            </List>  \n            \n            <Eduardo>\n                <h5>www.eduardoolimpio.com</h5>\n            </Eduardo>    \n                     \n        </Container>\n        \n        </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}