{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Container,Owner,Loading,BackButton,IssuesList,PageActions,FilterList}from\"./styles\";import{FaArrowLeft}from\"react-icons/fa\";import api from'../../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Repositorio(_ref){var match=_ref.match;// {} pois é apenas um único objeto, por isso não usei o array [].\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),repositorio=_useState2[0],setRepositorio=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),issues=_useState4[0],setIssues=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var _useState9=useState([{state:'all',label:'All',active:true},{state:'open',label:'Open',active:true},{state:'closed',label:'Closed',active:false}]),_useState10=_slicedToArray(_useState9,2),filters=_useState10[0],setFilters=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),filterIndex=_useState12[0],setFilterIndex=_useState12[1];useEffect(function(){function load(){return _load.apply(this,arguments);}function _load(){_load=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var nomeRepo,_yield$Promise$all,_yield$Promise$all2,repositorioData,issuesData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:nomeRepo=decodeURIComponent(match.params.repositorio);_context.next=3;return Promise.all([api.get(\"/repos/\".concat(nomeRepo)),api.get(\"/repos/\".concat(nomeRepo,\"/issues\"),{params:{state:filters.find(function(f){return f.active;}).state,per_page:5}})]);case 3:_yield$Promise$all=_context.sent;_yield$Promise$all2=_slicedToArray(_yield$Promise$all,2);repositorioData=_yield$Promise$all2[0];issuesData=_yield$Promise$all2[1];setRepositorio(repositorioData.data);setIssues(issuesData.data);setLoading(false);case 10:case\"end\":return _context.stop();}},_callee);}));return _load.apply(this,arguments);}load();},[match.params.repositorio]);useEffect(function(){function loadIssue(){return _loadIssue.apply(this,arguments);}function _loadIssue(){_loadIssue=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var nomeRepo,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:nomeRepo=decodeURIComponent(match.params.repositorio);_context2.next=3;return api.get(\"/repos/\".concat(nomeRepo,\"/issues\"),{params:{state:filters[filterIndex].state,page:page,per_page:5}});case 3:response=_context2.sent;setIssues(response.data);case 5:case\"end\":return _context2.stop();}},_callee2);}));return _loadIssue.apply(this,arguments);}loadIssue();},[filterIndex,filters,match.params.repositorio,page]);//função para paginação.\nfunction handlePage(action){setPage(action==='back'?page-1:page+1);}function handleFilter(index){setFilterIndex(index);}if(loading){return/*#__PURE__*/_jsx(Loading,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Carregando...\"})});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(BackButton,{to:\"/\",children:/*#__PURE__*/_jsx(FaArrowLeft,{color:\"#000\",size:35})}),/*#__PURE__*/_jsxs(Owner,{children:[/*#__PURE__*/_jsx(\"img\",{src:repositorio.owner.avatar_url,alt:\"{repositorio.owner.login}\"}),/*#__PURE__*/_jsx(\"h1\",{children:repositorio.name}),/*#__PURE__*/_jsx(\"p\",{children:repositorio.description})]}),/*#__PURE__*/_jsx(FilterList,{active:filterIndex,children:filters.map(function(filter,index){return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleFilter(index);},children:filter.label},filter.label);})}),/*#__PURE__*/_jsx(IssuesList,{children:issues.map(function(issue){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:issue.user.avatar_url,alt:issue.user.login}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[/*#__PURE__*/_jsx(\"a\",{href:issue.html_url,children:issue.title}),issue.labels.map(function(label){return/*#__PURE__*/_jsx(\"span\",{children:label.name},String(label.id));})]}),/*#__PURE__*/_jsx(\"p\",{children:issue.user.login})]})]},String(issue.id));})}),/*#__PURE__*/_jsxs(PageActions,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handlePage('back');},disabled:page<2,children:\"Anterior\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handlePage('next');},children:\"Pr\\xF3xima\"})]})]});}// style={{color: '#FFF'}}","map":{"version":3,"names":["React","useState","useEffect","Container","Owner","Loading","BackButton","IssuesList","PageActions","FilterList","FaArrowLeft","api","jsx","_jsx","jsxs","_jsxs","Repositorio","_ref","match","_useState","_useState2","_slicedToArray","repositorio","setRepositorio","_useState3","_useState4","issues","setIssues","_useState5","_useState6","loading","setLoading","_useState7","_useState8","page","setPage","_useState9","state","label","active","_useState10","filters","setFilters","_useState11","_useState12","filterIndex","setFilterIndex","load","_load","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","nomeRepo","_yield$Promise$all","_yield$Promise$all2","repositorioData","issuesData","wrap","_callee$","_context","prev","next","decodeURIComponent","params","Promise","all","get","concat","find","f","per_page","sent","data","stop","loadIssue","_loadIssue","_callee2","response","_callee2$","_context2","handlePage","action","handleFilter","index","children","to","color","size","src","owner","avatar_url","alt","name","description","map","filter","type","onClick","issue","user","login","href","html_url","title","labels","String","id","disabled"],"sources":["C:/Users/eduar/Documents/Projeto-Repositorios/project-repos/src/pages/Repositorio/index.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport { Container, Owner, Loading, BackButton, IssuesList, PageActions, FilterList } from \"./styles\";\nimport { FaArrowLeft } from \"react-icons/fa\";\nimport api from '../../services/api';\n\nexport default function Repositorio({match}) {\n\n    // {} pois é apenas um único objeto, por isso não usei o array [].\n    const [repositorio, setRepositorio] = useState({});\n    const [issues, setIssues] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [page, setPage] = useState(1);\n    const [filters, setFilters] = useState([\n        { state: 'all', label: 'All', active: true },\n        { state: 'open', label: 'Open', active: true },\n        { state: 'closed', label: 'Closed', active: false },\n]);\n\n    const [filterIndex, setFilterIndex] = useState(0);\n\n    useEffect(() => {\n\n        async function load() {\n            const nomeRepo = decodeURIComponent(match.params.repositorio);\n\n            const [repositorioData, issuesData] = await Promise.all([\n                api.get(`/repos/${nomeRepo}`),\n                api.get(`/repos/${nomeRepo}/issues`, {\n                    params: {\n                        state:  filters.find(f => f.active).state,\n                        per_page: 5\n                    }\n                })\n            ]);\n\n            setRepositorio(repositorioData.data);\n            setIssues(issuesData.data);\n            setLoading(false);\n\n        }\n        load();\n\n    }, [match.params.repositorio]);\n\n    useEffect(() => {\n        async function loadIssue() {\n            const nomeRepo = decodeURIComponent(match.params.repositorio);\n            const response = await api.get(`/repos/${nomeRepo}/issues`, {\n                params: {\n                    state: filters[filterIndex].state,\n                    page,\n                    per_page: 5,\n                },\n            });\n            setIssues(response.data);\n        }\n        loadIssue();\n    }, [filterIndex, filters, match.params.repositorio, page]);\n\n    //função para paginação.\n    function handlePage(action) {\n        setPage(action === 'back' ? page -1 : page + 1)\n    }\n\n    function handleFilter(index) {\n        setFilterIndex(index);\n    }\n\n    if(loading) {\n        return (\n        <Loading>\n            <h1>Carregando...</h1>\n        </Loading>\n      )\n    }\n\n    return (\n        <Container>\n            <BackButton to=\"/\">\n                <FaArrowLeft color=\"#000\" size={35} />\n            </BackButton>\n            <Owner>\n                <img src={repositorio.owner.avatar_url} alt=\"{repositorio.owner.login}\" />\n                <h1>{repositorio.name}</h1>\n                <p>{repositorio.description}</p>\n            </Owner>\n            <FilterList active={filterIndex}>\n                {filters.map((filter, index) => (\n                    <button type=\"button\" key={filter.label} onClick={() => handleFilter(index)}>\n                        {filter.label}\n                    </button>\n                ))}\n            </FilterList>\n            <IssuesList>\n                {issues.map(issue => (\n                    <li key={String(issue.id)}>\n                        <img src={issue.user.avatar_url} alt={issue.user.login} />\n                        <div>\n                            <strong>\n                                <a href={issue.html_url}>{issue.title}</a>\n                                {issue.labels.map(label => (\n                                    <span key={String(label.id)}>{label.name}</span>\n                                ))}\n                            </strong>\n                            <p>{issue.user.login}</p>\n                        </div>\n                    </li>\n                ))}\n            </IssuesList>\n            <PageActions>\n                <button type=\"button\" onClick={() => handlePage('back')} disabled={page < 2}>Anterior</button>\n                <button type=\"button\" onClick={() => handlePage('next')}>Próxima</button>\n            </PageActions>\n\n        </Container>\n    )\n}\n// style={{color: '#FFF'}}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}